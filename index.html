<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NFL Best/Worst Pool Leaderboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .setup-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .team-assignment {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .player-teams {
            background: #fff;
            border: 2px solid #eee;
            border-radius: 10px;
            padding: 15px;
        }

        .player-teams h3 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .team-select {
            margin-bottom: 5px;
        }

        .team-select select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        button:hover {
            transform: translateY(-2px);
        }

        .leaderboard {
            display: none;
        }

        .leaderboard-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .leaderboard-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: left;
            font-weight: bold;
        }

        .leaderboard-table td {
            padding: 12px 15px;
            border-bottom: 1px solid #eee;
        }

        .leaderboard-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .leaderboard-table tr:hover {
            background: #e3f2fd;
        }

        .position {
            font-weight: bold;
            color: #667eea;
        }

        .best-winner {
            background: #e8f5e8 !important;
            border-left: 4px solid #4CAF50;
            font-weight: bold;
        }

        .worst-winner {
            background: #fff3e0 !important;
            border-left: 4px solid #ff9800;
            font-weight: bold;
        }

        .teams-list {
            font-size: 0.9em;
            color: #666;
        }

        .week-controls {
            text-align: center;
            margin: 20px 0;
        }

        .week-controls input {
            width: 80px;
            margin: 0 10px;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 2px solid #eee;
        }

        .stat-card h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-card .value {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üèà NFL Best/Worst Pool</h1>
            <p>Draft teams and win with either the most wins OR most losses!</p>
        </div>

        <div class="content">
            <div id="setup" class="setup-section">
                <h2>Pool Setup</h2>
                
                <div class="input-group">
                    <label for="poolName">Pool Name:</label>
                    <input type="text" id="poolName" placeholder="Enter pool name (e.g., 'Johnson Family Pool 2025')">
                </div>

                <div class="input-group">
                    <label for="numPlayers">Number of Players:</label>
                    <select id="numPlayers">
                        <option value="4">4 Players (8 teams each)</option>
                        <option value="8" selected>8 Players (4 teams each)</option>
                        <option value="16">16 Players (2 teams each)</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>Player Names (one per line):</label>
                    <textarea id="playerNames" rows="8" style="width: 100%; padding: 10px; border: 2px solid #ddd; border-radius: 5px;" placeholder="Enter player names, one per line:&#10;Player 1&#10;Player 2&#10;Player 3&#10;etc..."></textarea>
                </div>

                <button onclick="setupPool()">Setup Pool</button>
            </div>

            <div id="teamAssignment" style="display: none;">
                <h2>Assign Teams to Players</h2>
                <p style="margin-bottom: 20px;">Select which NFL teams each player drafted:</p>
                <div id="teamAssignmentContainer"></div>
                <button onclick="generateLeaderboard()">Generate Leaderboard</button>
            </div>

            <div id="leaderboard" class="leaderboard">
                <div class="week-controls">
                    <label>Update Scores for Week: 
                        <input type="number" id="currentWeek" value="1" min="1" max="18">
                    </label>
                    <button onclick="updateScores()">Update Week Scores</button>
                    <button onclick="resetScores()">Reset All Scores</button>
                </div>

                <div class="stats" id="statsContainer"></div>

                <table class="leaderboard-table" id="leaderboardTable">
                    <thead>
                        <tr>
                            <th>Rank</th>
                            <th>Player</th>
                            <th>Total Wins</th>
                            <th>Total Losses</th>
                            <th>Teams</th>
                        </tr>
                    </thead>
                    <tbody id="leaderboardBody">
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const nflTeams = [
            'Arizona Cardinals', 'Atlanta Falcons', 'Baltimore Ravens', 'Buffalo Bills',
            'Carolina Panthers', 'Chicago Bears', 'Cincinnati Bengals', 'Cleveland Browns',
            'Dallas Cowboys', 'Denver Broncos', 'Detroit Lions', 'Green Bay Packers',
            'Houston Texans', 'Indianapolis Colts', 'Jacksonville Jaguars', 'Kansas City Chiefs',
            'Las Vegas Raiders', 'Los Angeles Chargers', 'Los Angeles Rams', 'Miami Dolphins',
            'Minnesota Vikings', 'New England Patriots', 'New Orleans Saints', 'New York Giants',
            'New York Jets', 'Philadelphia Eagles', 'Pittsburgh Steelers', 'San Francisco 49ers',
            'Seattle Seahawks', 'Tampa Bay Buccaneers', 'Tennessee Titans', 'Washington Commanders'
        ];

        let players = [];
        let poolData = {};

        function setupPool() {
            const poolName = document.getElementById('poolName').value || 'NFL Pool';
            const numPlayers = parseInt(document.getElementById('numPlayers').value);
            const playerNamesText = document.getElementById('playerNames').value.trim();
            
            if (!playerNamesText) {
                alert('Please enter player names');
                return;
            }

            players = playerNamesText.split('\n').map(name => name.trim()).filter(name => name);
            
            if (players.length !== numPlayers) {
                alert(`Please enter exactly ${numPlayers} player names`);
                return;
            }

            document.querySelector('.header h1').textContent = `üèà ${poolName}`;
            
            // Generate team assignment interface
            generateTeamAssignment();
            
            document.getElementById('setup').style.display = 'none';
            document.getElementById('teamAssignment').style.display = 'block';
        }

        function generateTeamAssignment() {
            const container = document.getElementById('teamAssignmentContainer');
            const teamsPerPlayer = Math.floor(32 / players.length);
            
            container.innerHTML = '';
            
            players.forEach((player, index) => {
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player-teams';
                
                let html = `<h3>${player} (${teamsPerPlayer} teams)</h3>`;
                
                for (let i = 0; i < teamsPerPlayer; i++) {
                    html += `
                        <div class="team-select">
                            <select id="player${index}_team${i}" onchange="updateAvailableTeams()">
                                <option value="">Select Team ${i + 1}</option>
                                ${nflTeams.map(team => `<option value="${team}">${team}</option>`).join('')}
                            </select>
                        </div>
                    `;
                }
                
                playerDiv.innerHTML = html;
                container.appendChild(playerDiv);
            });
            
            updateAvailableTeams();
        }

        function updateAvailableTeams() {
            // Get all currently selected teams
            const selectedTeams = new Set();
            const teamsPerPlayer = Math.floor(32 / players.length);
            
            players.forEach((player, playerIndex) => {
                for (let i = 0; i < teamsPerPlayer; i++) {
                    const select = document.getElementById(`player${playerIndex}_team${i}`);
                    if (select && select.value) {
                        selectedTeams.add(select.value);
                    }
                }
            });
            
            // Update all dropdowns to disable/remove selected teams
            players.forEach((player, playerIndex) => {
                for (let i = 0; i < teamsPerPlayer; i++) {
                    const select = document.getElementById(`player${playerIndex}_team${i}`);
                    if (select) {
                        const currentValue = select.value;
                        
                        // Clear the dropdown and rebuild it
                        select.innerHTML = '<option value="">Select Team ' + (i + 1) + '</option>';
                        
                        // Add available teams
                        nflTeams.forEach(team => {
                            if (!selectedTeams.has(team) || team === currentValue) {
                                const option = document.createElement('option');
                                option.value = team;
                                option.textContent = team;
                                if (team === currentValue) {
                                    option.selected = true;
                                }
                                select.appendChild(option);
                            }
                        });
                    }
                }
            });
            
            // Update available teams counter
            const remainingTeams = 32 - selectedTeams.size;
            const existingCounter = document.getElementById('remainingTeamsCounter');
            if (existingCounter) {
                existingCounter.remove();
            }
            
            if (remainingTeams > 0) {
                const counter = document.createElement('div');
                counter.id = 'remainingTeamsCounter';
                counter.style.cssText = 'text-align: center; margin: 10px 0; padding: 10px; background: #e3f2fd; border-radius: 5px; font-weight: bold; color: #1976d2;';
                counter.textContent = `${remainingTeams} teams remaining to assign`;
                document.getElementById('teamAssignmentContainer').insertBefore(counter, document.getElementById('teamAssignmentContainer').firstChild);
            }
        }

        function generateLeaderboard() {
            // Collect team assignments
            poolData = {};
            const teamsPerPlayer = Math.floor(32 / players.length);
            
            players.forEach((player, playerIndex) => {
                poolData[player] = {
                    teams: [],
                    wins: 0,
                    losses: 0
                };
                
                for (let i = 0; i < teamsPerPlayer; i++) {
                    const teamSelect = document.getElementById(`player${playerIndex}_team${i}`);
                    const team = teamSelect.value;
                    if (team) {
                        poolData[player].teams.push(team);
                    }
                }
                
                if (poolData[player].teams.length !== teamsPerPlayer) {
                    alert(`Please select all teams for ${player}`);
                    return;
                }
            });

            // Check for duplicate teams
            const allSelectedTeams = [];
            Object.values(poolData).forEach(data => {
                allSelectedTeams.push(...data.teams);
            });
            
            const duplicates = allSelectedTeams.filter((team, index) => allSelectedTeams.indexOf(team) !== index);
            if (duplicates.length > 0) {
                alert(`Duplicate teams selected: ${duplicates.join(', ')}`);
                return;
            }

            document.getElementById('teamAssignment').style.display = 'none';
            document.getElementById('leaderboard').style.display = 'block';
            
            updateLeaderboardDisplay();
        }

        function updateScores() {
            // In a real implementation, you'd fetch scores from an API
            // For now, we'll use random scores for demonstration
            const currentWeek = parseInt(document.getElementById('currentWeek').value);
            
            Object.keys(poolData).forEach(player => {
                let totalWins = 0;
                let totalLosses = 0;
                
                poolData[player].teams.forEach(team => {
                    // Simulate random wins/losses for each team based on current week
                    const gamesPlayed = currentWeek;
                    const wins = Math.floor(Math.random() * (gamesPlayed + 1));
                    const losses = gamesPlayed - wins;
                    totalWins += wins;
                    totalLosses += losses;
                });
                
                poolData[player].wins = totalWins;
                poolData[player].losses = totalLosses;
            });
            
            updateLeaderboardDisplay();
        }

        function resetScores() {
            Object.keys(poolData).forEach(player => {
                poolData[player].wins = 0;
                poolData[player].losses = 0;
            });
            document.getElementById('currentWeek').value = 1;
            updateLeaderboardDisplay();
        }

        function updateLeaderboardDisplay() {
            const tbody = document.getElementById('leaderboardBody');
            const statsContainer = document.getElementById('statsContainer');
            
            // Sort players by wins (descending) for ranking
            const sortedByWins = Object.entries(poolData).sort((a, b) => b[1].wins - a[1].wins);
            const sortedByLosses = Object.entries(poolData).sort((a, b) => b[1].losses - a[1].losses);
            
            const bestWinner = sortedByWins[0];
            const worstWinner = sortedByLosses[0];
            
            // Update stats
            statsContainer.innerHTML = `
                <div class="stat-card">
                    <h3>Leading for BEST</h3>
                    <div class="value">${bestWinner[0]}</div>
                    <p>${bestWinner[1].wins} wins</p>
                </div>
                <div class="stat-card">
                    <h3>Leading for WORST</h3>
                    <div class="value">${worstWinner[0]}</div>
                    <p>${worstWinner[1].losses} losses</p>
                </div>
                <div class="stat-card">
                    <h3>Current Week</h3>
                    <div class="value">${document.getElementById('currentWeek').value}</div>
                    <p>of 18</p>
                </div>
            `;
            
            // Update leaderboard table
            tbody.innerHTML = '';
            
            sortedByWins.forEach(([player, data], index) => {
                const row = tbody.insertRow();
                let className = '';
                
                if (player === bestWinner[0] && player === worstWinner[0]) {
                    className = 'best-winner'; // If same person leads both, show as best winner
                } else if (player === bestWinner[0]) {
                    className = 'best-winner';
                } else if (player === worstWinner[0]) {
                    className = 'worst-winner';
                }
                
                row.className = className;
                
                row.innerHTML = `
                    <td class="position">${index + 1}</td>
                    <td><strong>${player}</strong></td>
                    <td>${data.wins}</td>
                    <td>${data.losses}</td>
                    <td class="teams-list">${data.teams.join(', ')}</td>
                `;
            });
        }

        // Initialize with sample data for demonstration
        window.onload = function() {
            document.getElementById('playerNames').value = 'Player 1\nPlayer 2\nPlayer 3\nPlayer 4\nPlayer 5\nPlayer 6\nPlayer 7\nPlayer 8';
        };
    </script>
</body>
</html>
